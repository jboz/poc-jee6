<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:cc="http://java.sun.com/jsf/composite"
	xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:ice="http://www.icesoft.com/icefaces/component"
	xmlns:ace="http://www.icefaces.org/icefaces/components" xmlns:poc="http://java.sun.com/jsf/composite/components">

<head>
<title>(For validation only)</title>
</head>
<body>
	<cc:interface displayName="subQuestion">
		<cc:attribute name="response" displayName="response" />
	</cc:interface>

	<cc:implementation>
		<ui:param name="subkey" value="survey.#{cc.attrs.response.question.finalCode}" />
		<ui:param name="subunit" value="survey.#{cc.attrs.response.question.finalCode}.unit" />
		<ui:param name="sublist" value="survey.#{cc.attrs.response.question.finalCode}.list" />

		<ui:param name="rendererLabel"
			value="#{cc.attrs.response.question.parent != null and !cc.attrs.response.question.parent.multiResponse}" />

		<h:panelGroup styleClass="form" rendered="#{cc.attrs.response.question.formType == 'TEXT_FIELD'}">
			<ice:outputLabel value="#{msgs[subkey]}" rendered="#{rendererLabel}" />
			<ice:inputText value="#{cc.attrs.response.value}" immediate="true" />
			<ice:outputLabel value="#{msgs[subunit]}" />
		</h:panelGroup>

		<h:panelGroup styleClass="form" rendered="#{cc.attrs.response.question.formType == 'COMBO'}">
			<ice:selectOneMenu value="#{cc.attrs.response.value}" immediate="true">
				<f:selectItems value="#{surveyBean.values(cc.attrs.response.question.responseType)}" var="e" itemValue="#{e}"
					itemLabel="#{msgs['survey.'.concat(e.declaringClass.simpleName).concat('.').concat(e.name())]}" />
			</ice:selectOneMenu>
		</h:panelGroup>

		<h:panelGroup styleClass="form" rendered="#{cc.attrs.response.question.formType == 'DATE'}">
			<ice:outputLabel value="#{msgs[subkey]}" rendered="#{rendererLabel}" />
			<ice:selectInputDate value="#{cc.attrs.response.value}" immediate="true" renderAsPopup="true">
				<f:convertDateTime pattern="#{msgs['dateFormat']}" />
			</ice:selectInputDate>
			<ice:outputLabel value="#{msgs[subunit]}" />
		</h:panelGroup>
	</cc:implementation>
</body>
</html>